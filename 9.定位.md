# 定位

## 为什么需要定位

提问：以下情况使用标准流或者浮动流能实现吗？

1. 某个元素可以自由地在一个盒子内移动位置，并且压住其他盒子
2. 当我们滚动窗口地时候，盒子是固定在屏幕某个位置的

以上效果，标准流或者浮动都无法快速实现，此时需要定位来实现。

所以:

1. 浮动可以让多个块级盒子一行没有缝隙排列显示，经常用于横向排列盒子
2. 定位则是可以让盒子自由地在某个盒子内移动位置或者固定屏幕中地某个位置，平且可以压住其他盒子

## 定位的组成

定位：将盒子定在某一个位置，所以定位也是在摆盒子，按照定位的方式移动盒子

**定位 = 定位模式 + 边偏移量**

定位模式用于指定一个元素在文档中的定位方式，边偏移则决定了该元素的最终位置

### 定位模式

定位模式决定元素的定位方式，它通过CSS的position属性来设置，其值可以分为4个：

| 语义     | 值       |
| -------- | -------- |
| 静态定位 | static   |
| 相对定位 | relative |
| 绝对定位 | absolute |
| 固定定位 | fixed    |

### 边偏移

边偏移就是定位的盒子移动到最终位置，有top、bottom、left、right4个属性

## 定位分类

### 1.静态定位static（了解）

静态定位是元素的默认定位方式，无定位的意思

语法：

```css
选择器 { postition: static; }
```

- 静态定位是按照标准流特性摆放位置，它没有边偏移
- 静态定位在布局中很少使用

### 2.相对定位relative（重要）

相对定位是元素在移动位置的时候，是相对它原来的位置来说的（与父级无关）

语法：

```css
选择器 { position： ralative; }
```

特点：

- 它是相对于自己原来的位置来移动的
- 原来在标准流的位置继续占有，后面的盒子仍然以标准流的方式对待它（不脱标，继续保留原来的位置）

**因此，相对定位没有脱标。它嘴典型的应用是给绝对定位当爹**

### 3.绝对定位absolute（重要）

绝对定位是元素在移动的时候，相对**祖先元素**来移动

语法：

```
选择器 { position： absolute；}
```

绝对定位的特点：（务必记住）

1. 如果没有祖先元素或者祖先元素没有定位，则以浏览器为准定位（Document文档）
2. 如果祖先元素有定位（相对、绝对、固定定位），则以最近一级的有定位的祖先元素为参考点移动位置
3. 绝对定位不占有原来位置（脱标）

### 子绝父相

子级是绝对定位的话，父级要用相对定位

1. 子级绝对定位，不会占有位置，可以放到父盒子里面的任何一个地方，不会影响其他的兄弟盒子
2. 父盒子需要加定位限制子盒子在父盒子内显示
3. 父盒子布局时，需要占有位置，因此父盒子只能是相对定位

总结：因为父级需要占有位置，因此是相对定位，子盒子不需要占有位置，则是绝对定位

当然，子绝父相也不是永远不边的，如果父元素不需要占有位置，子绝父绝也会遇到

### 4.固定定位fixed（重要）

固定定位是元素固定于浏览器可视区的位置

主要使用场景：可以在浏览器页面滚动时元素的位置不变

语法

```
选择器 { position： fixed； }
```

特点：（务必记住）

1. 以浏览器的可视窗口为参照点移动元素
   - 跟父元素没有任何关系
   - 不随着滚动条滚动

2. 固定定位不占有原先的位置

固定定位也是脱标的，其实固定定位也可以看作一种特殊的绝对定位

#### 固定定位小技巧：固定在版心右侧位置

1. 让固定定位的盒子left: 50%。走到浏览器可视区（也可以看作是版心）的一半位置

2. 让固定定位的盒子margin-left:版心宽度的一半距离。多走版心宽度的一半位置

代码例子：

```css
.fixed-box {
    position: fixed;
    left: 50%;
    margin-left: 405px;
}
```

### 5.粘性定位sticky（了解）

粘性定位可以被认为是相对定位和固定定位的混合

语法：

```
选择器 { position: sticky; top: 10px; }
```

粘性定位的特点：

1. 以浏览器的可视窗口为参照点移动元素（固定定位的特点）
2. 粘性定位占有原先的位置（相对定位的特点）
3. 必须添加top、left、right、bottom其中一个才有效

跟页面滚动搭配使用，兼容性较差，IE不支持

## 定位的总结

| 定位模式         | 是否脱标          | 移动位置           | 是否常用        |
| ---------------- | ----------------- | ------------------ | --------------- |
| static静态定位   | 否                | 不能使用边偏移     | 很少            |
| relative相对定位 | 否（占有位置）    | 相对于自身位置移动 | 常用            |
| absolute绝对定位 | 是 （不占有位置） | 带有定位的父级     | 常用            |
| fixed固定定位    | 是（不占有位置）  | 浏览器可视区       | 常用            |
| sticky粘性定位   | 否（占有位置）    | 浏览器可视区       | emm，也多也不多 |

## 定位的叠放次序z-index

在使用定位布局时，可能会出现盒子重叠的情况。此时，可以使用z-index来控制盒子的前后次序（z轴）

## 定位的拓展

### 绝对定位的盒子居中

加了绝对定位的盒子不能通过margin： 0 auto 水平居中，但是可以通过一下计算方法实现水平和垂直居中

1. left: 50%； 让盒子的左侧移动到父级元素的水平中心位置 
2. margin-left： -100px； 让盒子移动自身宽度的一半

代码示例：

```css
.box {
    position: absolute;
    left: 50%;
    top: 50%;
    margin-left: -100px;
    margin-top: -100px;
    width: 200px;
    height: 200px;
}
```

### 定位的特性

绝对定位和固定定位也和浮动类似：

1. 行内元素添加绝对或者固定定位，可以直接设置高度和宽度
2. 块级元素添加绝对或者固定定位，如果不给宽度或者高度，默认大小是内容的大小

### 绝对定位（固定定位）会完全压住盒子

浮动元素不同，只会压住它下面标准流盒子，但是不会压住下面标准流盒子里面的文字（图片）

但是绝对定位（固定定位）会压住下面标准流所有的内容

浮动之所以不会压住文字，是因为浮动产生的目的最初是为了做文字环绕效果的，文字会围绕浮动元素

